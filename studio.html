<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title data-i18n="studioPageTitle">Studio – Wplace Color Converter</title>

  <link rel="stylesheet" href="main.css" />
  <link rel="stylesheet" href="studio.css" />
</head>
<body class="home">
  <div id="global-toast"></div>
  <header class="site-header">
    <div class="container header-inner">
    <!-- Backdrop + dropdown menu (mobile) -->
    <div id="menuBackdrop" class="menu-backdrop" hidden></div>
    <div id="mobileMenu" class="mobile-menu" aria-hidden="true">
      <nav class="mobile-menu-inner" aria-label="Mobile">
        <a class="menu-item" href="index.html" data-keep-lang>Home</a>
        <a class="menu-item" href="gallery.html" data-keep-lang>Gallery</a>
        <!--<hr class="menu-sep" />-->
      </nav>
    </div>
      <a class="brand" href="/" data-keep-lang>
        <img src="favicon.png" alt="" class="brand-mark" />
        <span class="brand-name" data-i18n="pageTitle">Wplace Color Converter</span>
      </a>
      <nav class="primary-nav" aria-label="Primary">
        <a class="nav-link" href="index.html"   data-keep-lang data-i18n="home">Home</a>
        <a class="nav-link" href="gallery.html" data-keep-lang data-i18n="gallery">Gallery</a>
      </nav>
      <div class="nav-tools">
        <select id="lang-select">
          <option value="en">🇺🇸 English</option>
          <option value="pt">🇵🇹 Português 🇧🇷</option>
          <option value="de">🇩🇪 Deutsch</option>
          <option value="es">🇪🇸 Español</option>
          <option value="fr">🇫🇷 Français</option>
          <option value="uk">🇺🇦 Українська</option>
          <option value="vi">🇻🇳 Tiếng Việt</option>
          <option value="pl">🇵🇱 Polski</option>
          <option value="ja">🇯🇵 日本語</option>
          <option value="de-CH">🇨🇭 Deutsch (Schweiz)</option>
          <option value="nl">🇳🇱 Nederlands</option>
          <option value="ru">🇷🇺 Русский</option>
          <option value="tr">🇹🇷 Türkçe</option>
          <option value="it">🇮🇹 Italiano</option>
        </select>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- SINGLE CARD FRAME -->
    <section class="card gp-card" aria-labelledby="studioTitle">
      <!-- Top band like a “title bar” -->
      <div class="gp-topband">
        <div class="gp-title">
          <h1 id="studioTitle" data-i18n="studioTitle">Studio</h1>
          <small class="muted" data-i18n="genNotice">
            Uses the public Pollinations image endpoint. Prompts may be logged publicly by that service. No account is required.
          </small>
        </div>
        <div class="gp-actions">
          <a id="downloadPng" class="btn" href="#" data-i18n="download">Download</a>
          <button id="addToGallery" class="btn" data-i18n="addToGallery">Add to Gallery</button>
        </div>
      </div>

      <!-- Work area: left palette – center notebook canvas – right tools -->
      <div class="gp-workarea">
      <!-- Left: color palette -->
      <aside class="gp-left">
        <div class="colors-panel">

          <div class="palette-block">
            <label class="label muted" data-i18n="paletteFree">Free Colors</label>
            <div class="palette" id="palette-free"></div>
          </div>

          <div class="palette-block">
            <label class="label muted" data-i18n="palettePaid">Paid Colors</label>
            <div class="palette" id="palette-paid"></div>
          </div>
        </div>
      </aside>

        <!-- Center: notebook viewport with stacked canvases -->
        <section class="gp-canvas">
          <div class="notebook">
            <div class="paper">
            <div class="studio-viewport" id="viewport">
              <div class="canvas-stage" id="stage">
                <canvas id="gridCanvas"  class="studio-layer" aria-hidden="true"></canvas>
                <canvas id="paintCanvas" class="studio-layer"></canvas>
              </div>
            </div>
            </div>
          </div>
        </section>

        <!-- Right: tools -->
        <aside class="gp-right">
          <div class="tools-panel">
          <h3 class="tools-heading" data-i18n="tools">Tools</h3>

          <div class="tools-group" aria-label="Draw">
            <div class="btn-grid">
              <button class="toolbtn" id="toolCursor"
                title="Cursor (V)" data-i18n-title="toolCursorTitle">
                <svg class="glyph" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="18" height="18" fill="white" stroke="currentColor" stroke-width="1.5">
                  <path d="M27.129 17.893 5.786 1.444a.75.75 0 0 0-1.201.698v-.004l3.573 26.709a.75.75 0 0 0 .549.626l.005.001a.75.75 0 0 0 .787-.276l.001-.002 6.005-8.026 5.293 9.169a.751.751 0 0 0 1.299-.754l.002.004-5.295-9.169 9.953-1.188a.75.75 0 0 0 .371-1.337l-.002-.001zm-11.63 1.171-.003.001a.73.73 0 0 0-.506.291l-.001.002-.001.001-5.586 7.467L6.314 3.743 24.76 17.959z"/>
                </svg>
                <small data-i18n="toolCursor">Cursor</small>
              </button>
              <button class="toolbtn" id="toolPencil" aria-pressed="true"
                      title="Pencil (P)" data-i18n-title="toolPencilTitle">
                <span class="glyph">✏️</span><small data-i18n="toolPencil">Pencil</small>
              </button>
              <button class="toolbtn" id="toolBrush"
                      title="Brush (H)" data-i18n-title="toolBrushTitle">
                <span class="glyph">🖌️</span><small data-i18n="toolBrush">Brush</small>
              </button>
              <button class="toolbtn" id="toolEraser"
                      title="Eraser (E)" data-i18n-title="toolEraserTitle">
                <span class="glyph">🩹</span><small data-i18n="toolEraser">Eraser</small>
              </button>
              <button class="toolbtn" id="toolPicker"
                      title="Eyedropper (I)" data-i18n-title="toolPickerTitle">
                <span class="glyph">🎯</span><small data-i18n="toolPicker">Pick</small>
              </button>
              <button class="toolbtn" id="toolFill"
                      title="Fill (B)" data-i18n-title="toolFillTitle">
                <span class="glyph">🪣</span><small data-i18n="toolFill">Fill</small>
              </button>
            </div>
          </div>

          <hr class="tools-sep" />

          <div class="tools-group" aria-label="Shapes">
            <div class="btn-grid">
              <button class="toolbtn" id="toolLine"  title="Line (L)" data-i18n-title="toolLineTitle">
                <span class="glyph">／</span><small data-i18n="toolLine">Line</small>
              </button>
              <button class="toolbtn" id="toolRect"  title="Rectangle (R)" data-i18n-title="toolRectTitle">
                <span class="glyph">▭</span><small data-i18n="toolRect">Rect</small>
              </button>
              <button class="toolbtn" id="toolRectF" title="Filled Rectangle (Shift+R)" data-i18n-title="toolRectFTitle">
                <span class="glyph">▮</span><small data-i18n="toolRectF">Rect+</small>
              </button>
              <button class="toolbtn" id="toolCirc"  title="Ellipse/Circle (O)" data-i18n-title="toolCircTitle">
                <span class="glyph">◯</span><small data-i18n="toolCirc">Circle</small>
              </button>
              <button class="toolbtn" id="toolCircF" title="Filled Ellipse (Shift+O)" data-i18n-title="toolCircFTitle">
                <span class="glyph">●</span><small data-i18n="toolCircF">Circle+</small>
              </button>
            </div>
          </div>

          <div class="btn-row">
            <button class="btn btn-secondary slender" id="toolUndo" title="Undo (Ctrl+Z)" data-i18n-title="undoTitle">↶ <span class="btn-text" data-i18n="undo">Undo</span></button>
            <button class="btn btn-secondary slender" id="toolRedo" title="Redo (Ctrl+Y)" data-i18n-title="redoTitle">↷ <span class="btn-text" data-i18n="redo">Redo</span></button>

          </div>
          </div>

          <div id="brushSizePopover" class="brush-popover" hidden></div>
          

          <div class="mini-controls">
            <label class="label" for="gridSize" data-i18n="gridSize">Grid Size</label>
            <select id="gridSize">
              <option value="16">16×16</option>
              <option value="32" selected>32×32</option>
              <option value="48">48×48</option>
              <option value="64">64×64</option>
              <option value="96">96×96</option>
              <option value="128">128×128</option>
            </select>

            <label class="label" for="zoom" data-i18n="zoom">Zoom</label>
            <input id="zoom" type="range" min="1" max="24" step="1" value="12" />
            <small class="muted" id="zoomLabel">12×</small>

            <div class="btn-row">
              <button class="btn btn-secondary" id="toggleGrid" data-i18n="showGrid">Show grid</button>
              <button class="btn btn-danger"    id="clearAll"   data-i18n="clear">Clear</button>
            </div>
            <label class="switch-row">
              <input id="toggleCursors" type="checkbox" checked>
              <span data-i18n="customCursors">Custom Cursors</span>
            </label>
          </div>
        </aside>
      </div>

      <!-- Bottom bar like Gartic: prompt + import + fit/pixelate -->
      <div class="gp-bottombar">
        <div class="prompt-wrap">
          <textarea id="prompt"
            data-i18n-placeholder="genPlaceholder"
            placeholder="e.g., retro 8-bit spaceship sprite facing right, transparent background"></textarea>
          <button class="btn" id="genBtn" data-i18n="generate">Generate</button>
          <small class="muted" id="genHint"></small>
        </div>
        
        <!-- Mini Upload Card -->
        <div style="height: 50px;" class="upload-box" id="miniUpload" tabindex="0" role="button" data-i18n-aria-label="uploadImage">
          <div class="upload-inner">
            <div class="upload-icon">📤</div>
            <p class="upload-text">
              <strong data-i18n="uploadImage">Upload Image</strong>
            </p>
          </div>
          <input type="file" id="uploader" accept="image/*" hidden />
        </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-content">
      <small>© <span id="year"></span> Wplace Color Converter</small>
      <div class="footer-links">
        <a class="nav-link" target="_blank" href="https://wplace.live/">Wplace</a>
        <a class="nav-link" target="_blank" href="https://github.com/PEPOAFONSO/color_converter_wplace">GitHub</a>
      </div>
    </div>
  </footer>

  <script src="translations.js"></script>
  <script src="toast.js"></script>
  <script src="studio.js"></script>
  <script>document.getElementById('year')?.append(new Date().getFullYear());</script>
</body>
</html>
